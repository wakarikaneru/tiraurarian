<div class="title">カードBOX</div>
<%= render partial: "/layouts/card_nav" %>

<div class="tweet-container list">
  <div class="hukidasi width-full">
    <p>ここでは、手持ちの不要なカードをまとめて捨てることができます</p>
  </div>
</div>
<div class="tweet-container list">
  <div class="hukidasi width-full">
    <li>カード所持数 <%= @count %>/<%= @box.size %></li>
    <li>
     <label>一括チェック：攻撃力<input type="number" id="atk1" min="1" max="100">～<input type="number" id="atk2" min="1" max="100"></label>
     <select id="operation">
      <option value="to">を</option>
      <option value="other">以外を</option>
     </select>
     <input type="button" id="chkbtn" class="btn btn-secondary" value="チェックする" onclick="
		var atk1 = $('#atk1').val();
		var atk2 = $('#atk2').val();
		var iAtk1 = parseInt(atk1, 10);
		var iAtk2 = parseInt(atk2, 10);
		
		if(iAtk1 < 0) {
			return;
		}
		if(iAtk2 < 0) {
			return;
		}
		if(iAtk1 > iAtk2) {
			return;
		}
		operation = $('#operation').val();
		$('form').find('.hukidasi').each(
			function(index, element){
				var atk = element.innerText.split(/\[|\]/)[3];
				var iAtk = parseInt(atk, 10);
				switch (operation) {
				case 'to':
					if(iAtk1 <= iAtk && iAtk2 >= iAtk){
						$(this).find('.form-check-input').prop('checked', true);
					}
					break;
				case 'other':
					if(iAtk1 <= iAtk && iAtk2 >= iAtk){
						;
					}
					else{
						$(this).find('.form-check-input').prop('checked', true);
					}
					break;
				}
			}
		)
     ">
     <input type="button" id="clrbtn" clea class="btn btn-secondary" value="解除する"  onclick="
		var atk1 = $('#atk1').val();
		var atk2 = $('#atk2').val();
		var iAtk1 = parseInt(atk1, 10);
		var iAtk2 = parseInt(atk2, 10);
		
		if(iAtk1 < 0) {
			return;
		}
		if(iAtk2 < 0) {
			return;
		}
		if(iAtk1 > iAtk2) {
			return;
		}
		operation = $('#operation').val();
		$('form').find('.hukidasi').each(
			function(index, element){
				var atk = element.innerText.split(/\[|\]/)[3];
				var iAtk = parseInt(atk, 10);
				switch (operation) {
				case 'to':
					if(iAtk1 <= iAtk && iAtk2 >= iAtk){
						$(this).find('.form-check-input').prop('checked', false);
					}
					break;
				case 'other':
					if(iAtk1 <= iAtk && iAtk2 >= iAtk){
						;
					}
					else{
						$(this).find('.form-check-input').prop('checked', false);
					}
					break;
				}
			}
		)
     ">
    <li>
  </div>
</div>
<%= render partial: "/layouts/card_dumpsite_list", locals: { cards: @cards, deletable: true, used_cards: @used_cards  } %>

<%= render partial: "/layouts/card_nav" %>

